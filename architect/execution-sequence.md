# Execution Sequence

> Wave-based ordering derived from the dependency graph.
> Generated by: `python scripts/topological_sort.py`
> Tracks within the same wave are independent and can run in parallel.
> All tracks in a wave must complete before the next wave starts.

---

## Wave 1 — Foundation

| # | Track ID | Complexity | Description |
|---|----------|------------|-------------|
| 01 | 01_plugin_scaffold | S | Plugin manifest, directory structure, README |

### Wave 1 Completion Criteria
- [ ] All phases in all wave tracks marked complete
- [ ] `.claude-plugin/plugin.json` is valid JSON
- [ ] Directory structure matches spec: `commands/`, `agents/`, `skills/codebase-documentation/`
- [ ] `README.md` covers installation, commands, architecture
- [ ] `find autopsy/ -type f | sort` shows correct structure

---

## Wave 2 — Agents

| # | Track ID | Complexity | Description |
|---|----------|------------|-------------|
| 02 | 02_discovery_agent | M | Phase 1 agent: repo mapping, AGENTS.md generation, batch planning |
| 03 | 03_review_agents | L | Phase 2 agents: bug-hunter, security-auditor, error-inspector, performance-detector, stack-reviewer |
| 04 | 04_synthesizer_agent | M | Phase 3 agent: dedup, cross-cutting analysis, REVIEW_REPORT.md |

### Wave 2 Completion Criteria
- [ ] All phases in all wave tracks marked complete
- [ ] All 7 agent definition files exist in `agents/`
- [ ] Each agent has YAML frontmatter with name, description, tools
- [ ] Each review agent includes 2-3 few-shot finding examples
- [ ] Each agent includes self-review step
- [ ] All agents follow the standardized finding format
- [ ] Exhaustive checklists are complete (not abbreviated)

---

## Wave 3 — Commands & Integration

| # | Track ID | Complexity | Description |
|---|----------|------------|-------------|
| 05 | 05_orchestrator_command | XL | Main orchestrator: 3-phase coordination, batch management, context pressure handling |
| 06 | 06_secondary_commands | M | maintain-docs command, codebase-documentation passive skill |

### Wave 3 Completion Criteria
- [ ] All phases in all wave tracks marked complete
- [ ] `commands/full-review.md` correctly references all 7 agents
- [ ] Orchestrator includes compaction-safe state management
- [ ] Batch sizing strategy implemented (small/medium/large/huge repos)
- [ ] Progress tracking writes to both `state.json` and `progress.md`
- [ ] `commands/maintain-docs.md` detects git changes and updates AGENTS.md files
- [ ] `skills/codebase-documentation/SKILL.md` has correct YAML frontmatter
- [ ] Passive skill does NOT trigger during autopsy operations
- [ ] Plugin loads successfully: `claude --plugin-dir ./autopsy`
- [ ] `find autopsy/ -type f | sort` shows all 12 files

---

## Wave 4 — Output Rendering

| # | Track ID | Complexity | Description |
|---|----------|------------|-------------|
| 07 | 07_output_rendering | L | Terminal output overhaul: rendering guide, progress bars, consistent formatting |

### Wave 4 Completion Criteria
- [x] All phases in all wave tracks marked complete
- [x] Output rendering guide exists at `references/output-rendering.md`
- [x] All commands follow the rendering guide conventions
- [x] Phase collapsing, symbols, colors, anti-patterns applied consistently

---

## Wave 5 — Architecture Assessment

| # | Track ID | Complexity | Description |
|---|----------|------------|-------------|
| 08 | 08_architecture_agents | L | 3 new agents: architect (ATAM-inspired analysis), researcher (docs/best-practices lookup), architecture-synthesizer (ARCHITECTURE_REPORT.md) |
| 09 | 09_architecture_orchestration | M | Integrate architecture agents into full-review: Phase 2A parallel with code review, architecture-synthesizer in Phase 3, plugin.json + README updates |

### Wave 5 Completion Criteria
- [ ] All phases in all wave tracks marked complete
- [ ] 3 new agent definitions exist in `agents/` (architect.md, researcher.md, architecture-synthesizer.md)
- [ ] Each agent has YAML frontmatter, checklists, few-shot examples, self-review step
- [ ] `commands/full-review.md` launches architecture agents in Phase 2A
- [ ] Architecture-synthesizer runs in Phase 3 alongside existing synthesizer
- [ ] `ARCHITECTURE_REPORT.md` generated as separate output from `REVIEW_REPORT.md`
- [ ] `plugin.json` registers all 10 agents
- [ ] `README.md` documents both reports
- [ ] Final summary shows both reports
- [ ] Plugin loads successfully: `claude --plugin-dir ./autopsy`

---

## Progress Summary

| Wave | Tracks | Total Complexity | Status |
|------|--------|-----------------|--------|
| 1 | 1 | 1 (S) | COMPLETE |
| 2 | 3 | 7 (M+L+M) | COMPLETE |
| 3 | 2 | 6 (XL+M) | COMPLETE |
| 4 | 1 | 3 (L) | COMPLETE |
| 5 | 2 | 5 (L+M) | NOT_STARTED |

Overall: 17/22 complexity-weighted units complete (77%)
